{% extends 'quiz_app/base.html' %}
{% block title %}View Quiz{% endblock %}

{% block content %}
<section class="py-5 modern-bg">
  <div class="container">
    <div class="card glass-card shadow-lg border-0 rounded-4">
      <div class="card-body p-4">
        
        <!-- Quiz Header -->
        <h2 class="fw-bold text-gradient mb-2">{{ quiz.title }}</h2>
        <p class="text-muted fst-italic">{{ quiz.description|default:"No description available." }}</p>

        <!-- Questions List -->
        <h5 class="mt-4 fw-semibold">üìã Questions</h5>
        {% if questions %}
          <ol class="list-group list-group-numbered modern-list">
            {% for q in questions %}
              <li class="list-group-item modern-list-item p-3 rounded-3 shadow-sm mb-3">
                <strong class="d-block mb-2">{{ q.text }}</strong>
                
                <!-- Options -->
                <div class="row">
                  <div class="col-sm-6">
                    <span class="option fw-semibold">A.</span> {{ q.option1 }}
                  </div>
                  <div class="col-sm-6">
                    <span class="option fw-semibold">B.</span> {{ q.option2 }}
                  </div>
                  <div class="col-sm-6">
                    <span class="option fw-semibold">C.</span> {{ q.option3 }}
                  </div>
                  <div class="col-sm-6">
                    <span class="option fw-semibold">D.</span> {{ q.option4 }}
                  </div>
                </div>

                <!-- Correct Answer -->
                <p class="mt-2 mb-2">
                  <span class="correct fw-bold text-success">‚úî Correct Answer:</span> 
                  <span class="badge bg-success-subtle text-success px-2 py-1 rounded-pill">
                    {{ q.correct_answer }}
                  </span>
                </p>

                <!-- Action Buttons -->
                <div class="d-flex gap-2 mt-2">
                  <a href="{% url 'edit_question' quiz.id q.id %}" class="btn btn-sm btn-warning">
                    ‚úè Edit
                  </a>
                  <a href="{% url 'delete_question' quiz.id q.id %}" class="btn btn-sm btn-danger delete-btn">
                    üóë Delete
                  </a>
                </div>
              </li>
            {% endfor %}
          </ol>
        {% else %}
          <p class="text-muted">‚ö† No questions added yet. 
            <a href="{% url 'add_question' quiz.id %}" class="fw-bold text-gradient">Click here to add some!</a>
          </p>
        {% endif %}

        <!-- Bottom Action Buttons -->
        <div class="mt-4 d-flex flex-wrap gap-2">
          <a href="{% url 'add_question' quiz.id %}" class="btn modern-btn">‚ûï Add More Questions</a>
          <a href="{% url 'dashboard' %}" class="btn modern-outline-btn">‚Üê Back to Dashboard</a>
        </div>

      </div>
    </div>
  </div>
</section>

<!-- Confirm delete -->
<script>
document.querySelectorAll(".delete-btn").forEach(btn => {
  btn.addEventListener("click", function(e) {
    if (!confirm("Are you sure you want to delete this question?")) {
      e.preventDefault();
    }
  });
});
</script>
{% endblock %}
