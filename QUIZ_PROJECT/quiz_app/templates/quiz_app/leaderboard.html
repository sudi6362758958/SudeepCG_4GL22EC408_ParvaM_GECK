{% extends 'quiz_app/base.html' %}
{% block title %}Leaderboard - {{ quiz.title }}{% endblock %}

{% block content %}
<section class="leaderboard-section py-5">
    <div class="container">
        <h2 class="text-center mb-4 fw-bold leaderboard-title">üèÜ Leaderboard ‚Äì {{ quiz.title }}</h2>

        <div class="table-responsive">
            <table class="leaderboard-table">
                <thead>
                    <tr>
                        <th>Rank</th>
                        <th>Student Name</th>
                        <th>Score</th>
                        <th>Submitted On</th>
                    </tr>
                </thead>
                <tbody>
                    {% for result in top_scores %}
                        <tr class="{% if forloop.counter == 1 %}gold{% elif forloop.counter == 2 %}silver{% elif forloop.counter == 3 %}bronze{% endif %} fade-in">
                            <td>
                                {% if forloop.counter == 1 %}ü•á
                                {% elif forloop.counter == 2 %}ü•à
                                {% elif forloop.counter == 3 %}ü•â
                                {% else %}{{ forloop.counter }}
                                {% endif %}
                            </td>
                            <td>{{ result.student.username }}</td>
                            <td>{{ result.score }} / {{ result.total }}</td>
                            <td>{{ result.submitted_at|date:"d M Y, h:i A" }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <div class="text-center mt-4">
            <a href="{% url 'student_quiz_list' %}" class="btn btn-warning">‚Üê Back to Quizzes</a>
        </div>
    </div>
</section>

<style>
/* Section & Background */
.leaderboard-section {
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #f5f5f5; /* Light gray background */
    color: #333; /* Dark text */
    font-family: 'Segoe UI', sans-serif;
}

/* Table */
.leaderboard-table {
    width: 100%;
    border-collapse: collapse;
    background: #fff; /* White table */
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    transition: transform 0.3s ease;
}

.leaderboard-table th,
.leaderboard-table td {
    padding: 12px 20px;
    text-align: center;
    color: #333;
}

.leaderboard-table th {
    background: #e0e0e0; /* Light gray header */
    font-weight: 600;
    text-transform: uppercase;
}

/* Row Effects */
.leaderboard-table tbody tr {
    transition: background 0.3s, transform 0.2s;
    cursor: default;
}

.leaderboard-table tbody tr:hover {
    background: #f0f0f0;
    transform: scale(1.01);
}

/* Top 3 Colors */
.gold { background: #fff8e1; font-weight: 600; }
.silver { background: #f1f1f1; font-weight: 600; }
.bronze { background: #f5e6da; font-weight: 600; }

/* Fade-in animation */
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}
.fade-in { animation: fadeIn 0.8s ease forwards; }

/* Back button */
.btn-back {
    display: inline-block;
    padding: 10px 20px;
    background: #e0e0e0;
    color: #333;
    text-decoration: none;
    border-radius: 8px;
    font-weight: 500;
    transition: background 0.3s, transform 0.2s;
}
.btn-back:hover {
    background: #d5d5d5;
    transform: translateY(-2px);
}

/* Mobile Responsive Cards */
@media (max-width: 768px) {
    .leaderboard-table, .leaderboard-table thead, .leaderboard-table tbody, .leaderboard-table th, .leaderboard-table td, .leaderboard-table tr {
        display: block;
    }

    .leaderboard-table thead tr { display: none; }

    .leaderboard-table tbody tr {
        margin-bottom: 15px;
        background: #fff;
        border-radius: 12px;
        padding: 12px 15px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.05);
    }

    .leaderboard-table tbody td {
        text-align: left;
        padding: 6px 0;
        position: relative;
        padding-left: 50%;
        color: #333;
    }

    .leaderboard-table tbody td::before {
        position: absolute;
        top: 6px;
        left: 15px;
        width: 45%;
        white-space: nowrap;
        font-weight: 600;
        content: attr(data-label);
        color: #555;
    }

    /* Add data-label dynamically using Django template */
    .leaderboard-table tbody td:nth-child(1)::before { content: "Rank"; }
    .leaderboard-table tbody td:nth-child(2)::before { content: "Student Name"; }
    .leaderboard-table tbody td:nth-child(3)::before { content: "Score"; }
    .leaderboard-table tbody td:nth-child(4)::before { content: "Submitted On"; }
}
</style>
{% endblock %}
